{{#let
  (element (arg-or-default @element "div"))
  (element this.buttonElement)
  as |Element ButtonElement|
}}
  <Element
    class={{class-names
      (if this.isOpen "euiAccordion-isOpen")
      componentName="EuiAccordion"
      paddingSize=this.paddingSize
    }}
    ...attributes
  >
    <div class={{class-names "euiAccordion__triggerWrapper" @triggerClassName}}>
      {{#if (eq this._arrowDisplay "left")}}
        <EuiButtonIcon
          @color="text"
          class={{class-names
            "euiAccordion__iconButton"
            (if this.isOpen "euiAccordion__iconButton-isOpen")
            (if
              (eq this._arrowDisplay "right") "euiAccordion__iconButton--right"
            )
            (if @arrowProps.className @arrowProps.className)
          }}
          @iconType="arrowRight"
          {{on "click" this.onToggle}}
          aria-controls={{@id}}
          aria-expanded={{this.isOpen}}
          aria-labelledby={{this.buttonId}}
          tabindex={{if this.buttonElementIsFocusable "-1" "0"}}
        />
      {{/if}}
      <ButtonElement
        type="button"
        id={{arg-or-default this.buttonProps.id (unique-id)}}
        class={{this.buttonClasses}}
        aria-controls={{@id}}
        aria-expanded={{this.isOpen}}
        aria-labelledby={{arg-or-default this.buttonProps.id (unique-id)}}
        {{on "click" this.onToggle}}
      >
        <span class={{this.buttonContentClasses}}>
          {{yield to="buttonContent"}}
        </span>
      </ButtonElement>
      {{#if (and @extraAction (not this.isLoading))}}
        <div class="euiAccordion__optionalAction">
          {{yield to="extraAction"}}
        </div>
      {{else if this.isLoading}}
        <div class="euiAccordion__optionalAction">
          <EuiLoadingSpinner />
        </div>
      {{/if}}
      {{#if (eq this._arrowDisplay "right")}}
        <EuiButtonIcon
          @color="text"
          class={{class-names
            "euiAccordion__iconButton"
            (if this.isOpen "euiAccordion__iconButton-isOpen")
            (if
              (eq this._arrowDisplay "right") "euiAccordion__iconButton--right"
            )
            (if @arrowProps.className @arrowProps.className)
          }}
          @iconType="arrowRight"
          {{on "click" this.onToggle}}
          aria-controls={{@id}}
          aria-expanded={{this.isOpen}}
          aria-labelledby={{this.buttonId}}
          tabindex={{if this.buttonElementIsFocusable "-1" "0"}}
        />
      {{/if}}
    </div>
    <div
      class="euiAccordion__childWrapper"
      style={{this.childContentStyle}}
      id={{@id}}
      {{did-insert (set this "childWrapper")}}
      tabindex="-1"
      role="region"
      aria-labelledby={{this.buttonId}}
    >
      <div
        class={{class-names
          (if this.isLoading "euiAccordion__children-isLoading")
          @childClassName
        }}
        {{did-insert (set this "childContent")}}
        {{resize-observer onResize=this.setChildContentHeight}}
      >
        {{#if (and this.isLoading this.isLoadingMessage)}}
          <EuiLoadingSpinner class="euiAccordion__spinner" />
          <span>
            {{#if this.hasLoadingMessage}}
              {{this.isLoadingMessage}}
            {{else}}
              {{! <EuiI18n @token="euiAccordion.isLoading" @default="Loading" /> }}
              Loading...
            {{/if}}
          </span>
        {{else}}
          {{yield to="content"}}
        {{/if}}
      </div>
    </div>
  </Element>
{{/let}}