{{#let
  (class-names
    "euiContextMenuItem"
    componentName="EuiContextMenuItem"
    disabled=@disabled
    layoutAlign=(arg-or-default @layoutAlign "center")
    size=@size
  )
as |classes|}}
  {{#if (and @href (not @disabled))}}
    <a
      class={{classes}}
      href={{@href}}
      target={{@target}}
      {{did-insert this.registerLink}}
      ...attributes
    />

  {{else}}
    <button
      class={{classes}}
      disabled={{@disabled}}
      type="button"
      {{did-insert this.registerLink}}
      ...attributes
    />
  {{/if}}
{{/let}}


{{!-- shared code that will be rendered inside the button or anchor --}}
{{#if this.link}}
  {{#in-element this.link}}
    <span
      class={{class-names
        'euiContextMenu__itemLayout'
        componentName="EuiContextMenuItem"
        layoutAlign=(arg-or-default @layoutAlign "center")
      }}
    >
      {{#if @isLoading}}
        {{!-- spinner is not part of eui spec --}}
        <EuiLoadingSpinner class="euiContextMenu__icon"/>
      {{else}}
        <EuiIcon
          @iconClasses={{concat "euiContextMenu__icon " @iconClasses}}
          @type={{@icon}}
          @size="m"
          @color="inherit"
        />
      {{/if}}
      <span class="euiContextMenuItem__text">
        {{yield}}
      </span>
      {{#if @hasPanel}}
        <EuiIcon @type="arrowRight" @size="m" class="euiContextMenu__arrow"/>
      {{/if}}
    </span>
  {{/in-element}}
{{/if}}