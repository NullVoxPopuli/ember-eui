{{#let
  (if @selectable (unique-id))
  (and
    (not @isDisabled)
    (or @onClick @href (and @selectable (not @selectable.isDisabled)))
  )
  (arg-or-default @titleElement "span")
  (arg-or-default @layout "vertical")
  as |selectableId isClickable titleElement layout|
}}
  <EuiPanel
    class={{class-names
      (if (eq layout "horizontal") "euiCard--horizontal")
      (if isClickable "euiCard--isClickable")
      (if @betaBadgeProps.label "euiCard--hasBetaBadge")
      (if @icon "euiCard--hasIcon" (if (has-block "icon") "euiCard--hasIcon"))
      (if @selectable "euiCard--isSelectable")
      (if (and @selectable @selectable.isSelected) "euiCard-isSelected")
      (if @isDisabled "euiCard-isDisabled")
      this.selectableColorClass
      componentName="EuiCard"
      textAlign=(arg-or-default @textAlign "center")
    }}
    @color={{if @isDisabled "subdued" @display}}
    @onClick={{if isClickable this.outerOnClick}}
    @hasShadow={{or @isDisabled @display}}
    @hasBorder={{if @display @display undefined}}
    @paddingSize={{@paddingSize}}
    ...attributes
  >

    {{#if (or (has-block "icon") (or @image @icon))}}
      <div class={{this.topClasses}}>
        {{#if (has-block "icon")}}
          {{yield "euiCard__icon" to="icon"}}
        {{else}}
          {{#if (or @image @icon)}}
            {{#if (and @image (not-eq layout "horizontal"))}}
              <div class="euiCard__image">
                <img src={{@image}} alt="card-top" />
              </div>
            {{/if}}
            {{#if @icon}}
              <EuiIcon
                @iconClasses="euiCard__icon"
                @type={{@icon}}
                @size={{@iconSize}}
              />
            {{/if}}
          {{/if}}
        {{/if}}
      </div>
    {{/if}}


    <div class={{this.contentClasses}}>
      <EuiTitle class="euiCard__title" @size={{arg-or-default @titleSize "s"}}>
        {{#if (has-block "title")}}
          {{yield (set this "link") to="title"}}
        {{else if (and (not @isDisabled) @href)}}
          <a
            class="euiCard__titleAnchor"
            target={{@target}}
            disabled={{@isDisabled}}
            href={{@href}}
            {{did-insert (set this "link")}}
          >
            {{#if (not-eq titleElement "span")}}
              {{#let (element titleElement) as |TitleElement|}}
                <TitleElement>{{@title}}</TitleElement>
              {{/let}}
            {{else}}
              <span>{{@title}}</span>
            {{/if}}

          </a>
        {{else if (or @isDisabled @onClick)}}
          <button
            type="button"
            class="euiCard__titleButton"
            disabled={{@isDisabled}}
            {{did-insert (set this "link")}}
            {{on "click" (optional @onClick)}}
          >
            {{#if (not-eq titleElement "span")}}
              {{#let (element titleElement) as |TitleElement|}}
                <TitleElement>{{@title}}</TitleElement>
              {{/let}}
            {{else}}
              <span>{{@title}}</span>
            {{/if}}
          </button>
        {{else}}
          {{#if (not-eq titleElement "span")}}
            {{#let (element titleElement) as |TitleElement|}}
              <TitleElement>{{@title}}</TitleElement>
            {{/let}}
          {{else}}
            <span>{{@title}}</span>
          {{/if}}
        {{/if}}
      </EuiTitle>
      {{#if (or @description (has-block "description"))}}
        <EuiText @grow={{true}} @size="s" class="euiCard__description">
          {{#if (has-block "description")}}
            <p>{{yield to="description"}}</p>
          {{else}}
            <p>{{@description}}</p>
          {{/if}}
        </EuiText>
      {{/if}}
      {{yield to="body"}}
    </div>
    {{#if @betaBadgeProps.label}}
      <span class="euiCard__betaBadgeWrapper">
        <EuiBetaBadge
          class="euiCard__betaBadge"
          @label={{@betaBadgeProps.label}}
          @title={{@betaBadgeProps.title}}
          @tooltipContent={{@betaBadgeProps.tooltipContent}}
        />
      </span>
    {{/if}}
    {{#if (and (eq layout "vertical") (or (has-block "footer") @footer))}}
      <div class="euiCard__footer">
        {{#if (has-block "footer")}}
          {{yield to="footer"}}
        {{else}}
          {{@footer}}
        {{/if}}
      </div>
    {{/if}}
    {{#if @selectable}}
      <EuiCardSelect
        @type={{@selectable.type}}
        @buttonId={{selectableId}}
        @isSelected={{@selectable.isSelected}}
        @isDisabled={{@selectable.isDisabled}}
        @color={{@selectable.color}}
        @iconType={{@selectable.iconType}}
        @isLoading={{@selectable.isLoading}}
        @href={{@selectable.href}}
        @iconSide={{@selectable.iconSide}}
        @flush={{@selectable.flush}}
        {{did-insert (set this "link")}}
        {{on "click" (optional @selectable.onClick)}}
      />
    {{/if}}
  </EuiPanel>
{{/let}}