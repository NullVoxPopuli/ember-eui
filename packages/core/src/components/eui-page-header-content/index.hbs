{{! @glint-nocheck: not typesafe yet }}
{{#let
  (arg-or-default @responsive true)
  (arg-or-default @alignItems "top")
  (use-state false)
  (and (arg-or-default @hasDescriptionBlock true) (has-block "description"))
  (and
    (arg-or-default @hasRightSideItemsBlock true) (has-block "rightSideItems")
  )
  (or
    (and (arg-or-default @hasPageTitleBlock true) (has-block "pageTitle"))
    @pageTitle
  )
  (and (arg-or-default @hasDefaultBlock true) (has-block "default"))
  as |responsive alignItems isResponsiveBreakpoint hasDescriptionBlock hasRightSideItemsBlock hasPageTitleBlock hasDefaultBlock|
}}
  <div
    class={{class-names
      "euiPageHeaderContent"
      (if @restrictWidth "euiPanel--restrictWidth-custom" "")
    }}
    {{style (inline-styles width=@restrictWidth)}}
    {{use-is-within-breakpoints
      sizes=(array "xs" "s")
      isActive=(not (not responsive))
      setIsWithinBreakpointsValue=isResponsiveBreakpoint.setState
    }}
    ...attributes
  >
    {{#if @breadcrumbs}}
      <EuiBreadcrumbs
        @breadcrumbs={{@breadcrumbs}}
        class={{@breadcrumbProps.className}}
      />
      <EuiSpacer @size="s" />
    {{/if}}
    {{#if (or (eq alignItems "top") isResponsiveBreakpoint.value)}}
      <EuiFlexGroup
        class="euiPageHeaderContent__top"
        @responsive={{not (not responsive)}}
        @alignItems={{if hasPageTitleBlock "flexStart" "baseline"}}
        @gutterSize="l"
      >
        {{#if (and isResponsiveBreakpoint.value (eq responsive "reverse"))}}
          {{#if hasRightSideItemsBlock}}
            <EuiFlexItem @grow={{false}}>
              <EuiFlexGroup
                @wrap={{true}}
                @responsive={{false}}
                class={{class-names
                  "euiPageHeaderContent__rightSideItems"
                  @rightSideGroupProps.className
                }}
              >
                {{yield
                  (component "eui-flex-item" grow=false)
                  to="rightSideItems"
                }}
              </EuiFlexGroup>
            </EuiFlexItem>
          {{/if}}
          <EuiFlexItem>
            {{#if (and (not hasPageTitleBlock) @tabs)}}
              <EuiTabs @size="xl" @display="condensed" @bottomBorder={{false}}>
                {{#each @tabs as |tab|}}
                  <EuiTab
                    @isSelected={{tab.isSelected}}
                    @href={{tab.href}}
                    {{on "click" (optional tab.onClick)}}
                  >
                    {{tab.label}}
                  </EuiTab>
                {{/each}}
              </EuiTabs>
            {{/if}}
            {{#if hasPageTitleBlock}}
              <EuiTitle
                class={{@pageTitleProps.className}}
                @size="l"
                @tagName="h1"
              >
                {{#if @iconType}}
                  <EuiIcon
                    @size="xl"
                    @type={{@iconType}}
                    @iconClasses={{class-names
                      "euiPageHeaderContent__titleIcon"
                      @iconProps.className
                    }}
                  />
                {{/if}}

                {{@pageTitle}}
                {{yield to="pageTitle"}}

              </EuiTitle>
            {{/if}}

            {{#if hasDescriptionBlock}}
              {{#if (or hasPageTitleBlock @tabs)}}
                <EuiSpacer />
              {{/if}}
              <EuiText @grow={{false}}>
                {{@description}}
                {{yield to="description"}}
              </EuiText>
            {{/if}}
          </EuiFlexItem>
        {{else}}
          <EuiFlexItem>
            {{#if (and (not hasPageTitleBlock) @tabs)}}
              <EuiTabs @size="xl" @display="condensed" @bottomBorder={{false}}>
                {{#each @tabs as |tab|}}
                  <EuiTab
                    @isSelected={{tab.isSelected}}
                    {{on "click" (optional tab.onClick)}}
                  >
                    {{tab.label}}
                  </EuiTab>
                {{/each}}
              </EuiTabs>
            {{/if}}
            {{#if hasPageTitleBlock}}
              <EuiTitle
                class={{@pageTitleProps.className}}
                @size="l"
                @tagName="h1"
              >
                {{#if @iconType}}
                  <EuiIcon
                    @size="xl"
                    @type={{@iconType}}
                    @iconClasses={{class-names
                      "euiPageHeaderContent__titleIcon"
                      @iconProps.className
                    }}
                  />
                {{/if}}

                {{@pageTitle}}
                {{yield to="pageTitle"}}
              </EuiTitle>
            {{/if}}

            {{#if hasDescriptionBlock}}
              {{#if (or hasPageTitleBlock @tabs)}}
                <EuiSpacer />
              {{/if}}
              <EuiText @grow={{false}}>
                {{@description}}
                {{yield to="description"}}
              </EuiText>
            {{/if}}
          </EuiFlexItem>
          {{#if hasRightSideItemsBlock}}
            <EuiFlexItem @grow={{false}}>
              <EuiFlexGroup
                @wrap={{true}}
                @responsive={{false}}
                class={{class-names
                  "euiPageHeaderContent__rightSideItems"
                  @rightSideGroupProps.className
                }}
              >
                {{yield
                  (component "eui-flex-item" grow=false)
                  to="rightSideItems"
                }}
              </EuiFlexGroup>
            </EuiFlexItem>
          {{/if}}
        {{/if}}
      </EuiFlexGroup>
      {{#if (or hasDefaultBlock (and hasPageTitleBlock @tabs))}}
        <div class="euiPageHeaderContent__bottom">
          <EuiSpacer />
          {{yield to="default"}}
          {{#if hasPageTitleBlock}}
            <EuiTabs @size="l" @display="condensed" @bottomBorder={{false}}>
              {{#each @tabs as |tab|}}
                <EuiTab
                  @isSelected={{tab.isSelected}}
                  {{on "click" (optional tab.onClick)}}
                >
                  {{tab.label}}
                </EuiTab>
              {{/each}}
            </EuiTabs>
          {{/if}}
        </div>
      {{/if}}
    {{else}}
      <EuiFlexGroup
        class="euiPageHeaderContent__top"
        @responsive={{not (not responsive)}}
        @alignItems={{if (eq alignItems "bottom") "flexEnd" alignItems}}
        @gutterSize="l"
      >
        <EuiFlexItem>
          {{#if (and (not hasPageTitleBlock) @tabs)}}
            <EuiTabs @size="xl" @display="condensed" @bottomBorder={{false}}>
              {{#each @tabs as |tab|}}
                <EuiTab
                  @isSelected={{tab.isSelected}}
                  @href={{tab.href}}
                  {{on "click" (optional tab.onClick)}}
                >
                  {{tab.label}}
                </EuiTab>
              {{/each}}
            </EuiTabs>
          {{/if}}
          {{#if hasPageTitleBlock}}
            <EuiTitle
              class={{@pageTitleProps.className}}
              @size="l"
              @tagName="h1"
            >
              {{#if @iconType}}
                <EuiIcon
                  @size="xl"
                  @type={{@iconType}}
                  @iconClasses={{class-names
                    "euiPageHeaderContent__titleIcon"
                    @iconProps.className
                  }}
                />
              {{/if}}

              {{@pageTitle}}
              {{yield to="pageTitle"}}
            </EuiTitle>
          {{/if}}

          {{#if hasDescriptionBlock}}
            {{#if (or hasPageTitleBlock @tabs)}}
              <EuiSpacer />
            {{/if}}
            <EuiText @grow={{false}}>
              {{@description}}
              {{yield to="description"}}
            </EuiText>
          {{/if}}
          {{#if (or hasDefaultBlock (and hasPageTitleBlock @tabs))}}
            <div class="euiPageHeaderContent__bottom">
              <EuiSpacer />
              {{yield to="default"}}
              {{#if hasPageTitleBlock}}
                <EuiTabs @size="l" @display="condensed" @bottomBorder={{false}}>
                  {{#each @tabs as |tab|}}
                    <EuiTab
                      @isSelected={{tab.isSelected}}
                      {{on "click" (optional tab.onClick)}}
                    >
                      {{tab.label}}
                    </EuiTab>
                  {{/each}}
                </EuiTabs>
              {{/if}}
            </div>
          {{/if}}
        </EuiFlexItem>
        {{#if hasRightSideItemsBlock}}
          <EuiFlexItem @grow={{false}}>
            <EuiFlexGroup
              @wrap={{true}}
              @responsive={{false}}
              class={{class-names
                "euiPageHeaderContent__rightSideItems"
                @rightSideGroupProps.className
              }}
            >
              {{yield
                (component "eui-flex-item" grow=false)
                to="rightSideItems"
              }}
            </EuiFlexGroup>
          </EuiFlexItem>
        {{/if}}
      </EuiFlexGroup>
    {{/if}}
  </div>
{{/let}}