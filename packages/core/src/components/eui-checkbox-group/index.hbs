{{#let
  (arg-or-default @valueKey "id")
  (arg-or-default @labelKey "label") as |valueKey labelKey|
}}
  {{!template-lint-disable}}
  <input
    tabindex="-1"
    style="opacity: 0px; width:0px; height:0px; position: absolute; top: 40%; border:solid 1px transparent !important; margin:0px !important;"
    class="fake-input-for-html-form-validity"
    {{validatable-control @isInvalid}}
  />
  {{!template-lint-enable}}
  {{#if @legend}}
    <EuiFormFieldset @legend={{@legend}} @compressed={{@compressed}}>
      {{#each @options key=valueKey as |option|}}
        <EuiCheckbox
          form={{@formId}}
          class={{concat "euiCheckboxGroup__item" option.className}}
          @checked={{get @idToSelectedMap (get option valueKey)}}
          @disabled={{or @disabled option.disabled}}
          @compressed={{@compressed}}
          @label={{get option labelKey}}
          {{on "change" (fn @onChange (get option valueKey))}}
        />
      {{/each}}
    </EuiFormFieldset>
  {{else}}
    <div ...attributes>
      {{#each @options key=valueKey as |option|}}
        <EuiCheckbox
          form={{@formId}}
          class={{concat "euiCheckboxGroup__item" option.className}}
          @checked={{get @idToSelectedMap (get option valueKey)}}
          @disabled={{or @disabled option.disabled}}
          @compressed={{@compressed}}
          @label={{get option labelKey}}
          {{on "change" (fn @onChange (get option valueKey))}}
        />
      {{/each}}
    </div>
  {{/if}}
{{/let}}