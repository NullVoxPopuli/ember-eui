{{! @glint-nocheck: not typesafe yet }}
{{#let
  (class-names "euiSideNav" (if @isOpenMobile "euiSideNav-isOpenMobile"))
  (element (arg-or-default @headingProps.element "h2"))
  (arg-or-default @headingProps.id (unique-id))
  (unique-id)
  (or (has-block "heading") (not (not @heading)))
  as |classes HeadingElement headingId sideNavContentId hasHeader|
}}
  {{#if this.hasMobileVersion}}
    <EuiShowFor @sizes={{this.mobileBreakpoints}}>
      <nav aria-labelledby={{headingId}} class={{classes}} ...attributes>
        <HeadingElement id={{headingId}} class={{@headingProps.className}}>
          <EuiButtonEmpty
            type="button"
            class="euiSideNav__mobileToggle"
            @contentClasses="euiSideNav__mobileToggleContent"
            @textClasses="euiSideNav__mobileToggleText"
            {{on
              "click"
              (fn (optional @toggleOpenOnMobile) (not @isOpenMobile))
            }}
            @iconType="apps"
            @iconSide="right"
            aria-controls={{sideNavContentId}}
            aria-expanded={{@isOpenMobile}}
          >
            {{#if @mobileTitle}}
              {{@mobileTitle}}
            {{else if (has-block "heading")}}
              {{yield to="heading"}}
            {{else}}
              {{@heading}}
            {{/if}}
          </EuiButtonEmpty>
        </HeadingElement>
        <div id={{sideNavContentId}} class={{this.contentClasses}}>
          {{#each @items as |item|}}
            {{#let
              (and (not item.onClick) (not item.href) (not (not item.items)))
              as |childrenOnly|
            }}
              <EuiSideNavItem
                @selectedItem={{@selectedItem}}
                @isOpen={{is-item-open item @selectedItem}}
                @isSelected={{and
                  (not childrenOnly)
                  (eq item.id item.isSelected)
                }}
                @isParent={{not (not item.items)}}
                @icon={{item.icon}}
                @onClick={{item.onClick}}
                @href={{item.href}}
                @className={{item.className}}
                @rel={{item.rel}}
                @target={{item.target}}
                @items={{item.items}}
                @key={{item.id}}
                @depth={{0}}
                @renderItem={{item.renderItem}}
                @disabled={{item.disabled}}
                @truncate={{item.truncate}}
                @emphasize={{item.emphasize}}
                @buttonClassName={{item.buttonClassName}}
                @childrenOnly={{childrenOnly}}
              >
                {{item.name}}
              </EuiSideNavItem>
            {{/let}}
          {{/each}}
        </div>
      </nav>
    </EuiShowFor>
  {{/if}}

  <EuiHideFor @sizes={{this.mobileBreakpoints}}>
    <nav
      aria-labelledby={{if hasHeader headingId}}
      class={{classes}}
      ...attributes
    >
      {{#if hasHeader}}
        {{#let
          (arg-or-default @headingProps.screenReaderOnly false)
          as |screenReaderOnly|
        }}
          {{#if (has-block "heading")}}
            {{#if screenReaderOnly}}
              <HeadingElement {{screen-reader-only}}>
                {{yield to="heading"}}
              </HeadingElement>
            {{else}}
              <EuiTitle
                class={{class-names
                  "euiSideNav__heading"
                  @headingProps.className
                }}
                @size="xs"
              >
                <HeadingElement>
                  {{yield to="heading"}}
                </HeadingElement>
              </EuiTitle>
            {{/if}}
          {{else}}
            {{#if screenReaderOnly}}
              <HeadingElement {{screen-reader-only}}>
                {{@heading}}
              </HeadingElement>
            {{else}}
              <EuiTitle
                class={{class-names
                  "euiSideNav__heading"
                  @headingProps.className
                }}
                @size="xs"
              >
                {{@heading}}
              </EuiTitle>
            {{/if}}
          {{/if}}
        {{/let}}
      {{/if}}
      <div id={{sideNavContentId}} class={{this.contentClasses}}>
        {{#each @items as |item|}}
          {{#let
            (and (not item.onClick) (not item.href) (not (not item.items)))
            as |childrenOnly|
          }}
            <EuiSideNavItem
              @selectedItem={{@selectedItem}}
              @isOpen={{is-item-open item @selectedItem}}
              @isSelected={{and
                (not childrenOnly)
                (eq item.id item.isSelected)
              }}
              @isParent={{not (not item.items)}}
              @icon={{item.icon}}
              @onClick={{item.onClick}}
              @href={{item.href}}
              @className={{item.className}}
              @rel={{item.rel}}
              @target={{item.target}}
              @items={{item.items}}
              @key={{item.id}}
              @depth={{0}}
              @renderItem={{item.renderItem}}
              @disabled={{item.disabled}}
              @truncate={{item.truncate}}
              @emphasize={{item.emphasize}}
              @buttonClassName={{item.buttonClassName}}
              @childrenOnly={{childrenOnly}}
            >
              {{item.name}}
            </EuiSideNavItem>
          {{/let}}
        {{/each}}
      </div>
    </nav>
  </EuiHideFor>

{{/let}}
